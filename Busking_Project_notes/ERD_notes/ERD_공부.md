# 📘 ERD 학습 정리
> 작성 날짜: 2025/03/27  
> 버스킹 프로젝트를 진행하면서 ERD의 중요성과 작성법을 학습하며 정리한 내용입니다.

---

## ✅ 프로젝트를 하며 느낀 점
- 버스킹 프로젝트를 하면서 **체계적으로 단계를 쌓아가는 것**이 중요하다는 것을 깨달음
- ERD 작성을 한 번도 해본 적이 없어, 기본 개념부터 다시 공부함

---

## 🧩 ERD(Entity Relationship Diagram)란?
- **ERD의 목적**: 데이터베이스 설계를 시각적으로 표현하여 데이터를 구성하고 관리하는 데 도움이 되는 도구

---

## ✅ ERD를 먼저 작성해야 하는 이유

### 1. 기능 = 데이터의 흐름
- 모든 기능은 결국 데이터를 생성, 조회, 수정, 삭제(CRUD)하는 것
- 어떤 데이터가 **어디에 저장되고**, **어떻게 연결되는지** 알아야 API도 명확히 설계할 수 있음
- 예: 리뷰 기능 설계 전 → 리뷰는 어떤 테이블? 게시글과 관계? 작성자? 평균 별점 계산?

### 2. API 명세는 결국 DB 기반
- API 명세 작성 시 자주 하는 고민:
  - 어떤 데이터가 필요하지?
  - 어떤 값을 보내고 받을까?
  - 어디에 저장해야 하지?
- 이 모든 답은 ERD에 있음 → ERD 없이 API 먼저 만들면 구조가 꼬이기 쉬움

### 3. 팀원과의 의사소통 도구
- ERD는 개발자 간의 **공통 언어**
  - "Busking 테이블은 user_id랑 연결되어 있어"
  - "홍보 게시판은 PromotionPost야"
- 팀 프로젝트일수록 꼭 필요한 설계도

### 4. Spring Boot(JPA)와의 연결
- Spring Data JPA에서는 `ERD → Entity → Repository → API`로 구조가 이어짐
- ERD 없이 개발하면 Entity 클래스도 정리가 안 되고 구조가 엉망이 될 수 있음

💡 **결론**  
- ERD는 API보다 먼저!
- 초안이라도 먼저 그려놓고 개발하며 보완하면 충분하다!

---

## ✏️ ERD 작성 방법

### 1. 엔터티 정의
- 기능 목록 → 테이블 목록으로 변환
  - 예: 회원가입 → `User` 테이블, 게시판 → `BoardPost` 테이블

### 2. 관계 정의
- 테이블 간의 관계(1:N, N:M)를 정의
  - 예: `User (1) : (N) Busking` → 한 사용자가 여러 일정을 가질 수 있음
- 팁:
  - 1:N → FK는 N 쪽에 둠
  - N:M → 조인 테이블 필요 (`UserTag` 등)

#### ⚠ 다대다(N:M) 관계 주의점
1. RDBMS는 직접적인 N:M 관계를 지원하지 않음 → 반드시 **중간 테이블 필요**
2. **성능 이슈**: 조인이 많아짐 → 쿼리 느림, 복잡성 증가
3. 중간 테이블에 **추가 정보**가 필요해질 수 있음 (ex. 등록일자 등)
4. **양방향 연관관계 꼬임 가능성** → JPA에서 관리가 어려움

💡 실무에서는?
- 대부분 **중간 테이블을 별도 테이블처럼 명시적 생성**
- 필요한 필드 포함해서 관리하는 게 일반적

### 3. 속성 정의
- 각 테이블에 어떤 필드(컬럼)가 필요한지 정의

### 4. ERD 도구 사용
- [dbdiagram.io](https://dbdiagram.io), [ERD Cloud](https://erdcloud.com) 등
- 설계 후 나중에 MySQL 등에 직접 반영

---

## ❓ ERD는 실제 DB에서 그릴 필요 있을까?

- ERD는 **설계도일 뿐, 직접 DB에서 그리는 게 아님**
- 대부분 개발자들은 웹 기반 도구로 ERD를 작성하고,
  이를 기반으로 DDL 쿼리나 JPA Entity 클래스를 작성함

---

## 💬 리뷰 기능은 왜 별도 테이블이 필요할까?

- `PromotionPost` 하나에 **리뷰 여러 개** 달릴 수 있으므로 → `1:N 관계`
- 따라서 `Review` 테이블을 **따로 설계해야 함**

### ✅ 리뷰 테이블을 따로 만들면 생기는 장점:
- **확장성**: 기능 추가 (수정, 신고 등)
- **유연성**: 별점, 내용, 날짜 등 다양한 필드 관리
- **깔끔한 설계**: 테이블마다 책임 분리 (SRP 원칙)

📌 언제는 합쳐도 될까?
- 정말 단순한 앱이고, **리뷰가 1개만 가능**할 경우  
  → `PromotionPost` 테이블에 `review`, `rating` 필드 포함 가능

---

📝 작성자: 나  
📁 주제: ERD 기본 개념, 작성 순서, 주의할 점

