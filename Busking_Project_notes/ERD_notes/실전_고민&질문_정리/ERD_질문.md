# 📌 ERD 질문 정리
> 작성 날짜: 2025/03/28
> 
> 수정 날짜: 2025/04/07 → 소셜 로그인 vs 로컬 로그인

---

## ✅ Q1. 회원 삭제할 때 별도 필드가 필요 없을까?

- 실제 운영 환경에서는 **삭제 필드가 거의 항상 필요**
- 이유: 대부분 **Soft Delete(소프트 삭제)** 방식을 사용

### 💡 Soft Delete란?
> 데이터를 물리적으로 삭제하지 않고, 삭제 여부만 표시하는 방식

```sql
is_deleted = true
```

### 📌 왜 Soft Delete를 쓸까?

| 이유         | 설명                                                            |
|--------------|-----------------------------------------------------------------|
| 데이터 복구   | 실수로 삭제했을 때 복구 가능                                     |
| 참조 무결성   | FK로 참조 중인 데이터를 보호                                     |
| 로그 보관     | 사용자 이력 추적 가능 (보안/법적 근거 확보 등)                    |

> ➕ 기능상으로는 탈퇴지만, **데이터는 DB에 남겨두는 구조**다

---

## ✅ Q2. 생년월일 필드는 꼭 필요한가?

- 무조건 필요한 건 아님
- **서비스 목적**에 따라 결정

### ✅ 사용 사례

| 쓰는 경우           | 예시                                           |
|----------------------|------------------------------------------------|
| 나이 제한 기능 필요   | 만 14세 이상 가입, 성인 인증 등                |
| 생일 축하 기능        | 생일 알림, 포인트 지급, 생일 쿠폰 등            |
| 인구통계 분석 목적    | 연령별 분포 통계 등                              |

### 💡 대안 팁
- 생일 대신 **연령대 선택**(10대, 20대 등)으로 대체 가능
- 생년월일 수집 시 **개인정보 보호법** 등 정책 고려 필수

---

## ✅ Q3. 가입일은 왜 필요할까?

- 가입일(created_at)은 거의 모든 서비스에서 **필수 필드**

### 📌 주요 활용

| 이유              | 설명                                                            |
|-------------------|-----------------------------------------------------------------|
| 활동 분석         | 어떤 시점에 가입자가 많이 유입되었는지 확인 가능                 |
| 가입 기간 기반 기능 | 가입 n일 경과 시 혜택, 알림 등 기능 구현                        |
| 정렬/필터링       | 최근 가입자, 오래된 회원 기준으로 리스트 구성                   |
| 관리자 페이지 용도 | 유저 관리 화면에서 기본적으로 사용됨                             |

> ➕ 실제 운영 서비스에선 `created_at` 컬럼은 거의 모든 테이블에 포함됨

---

## ✅ Q4. 회원 테이블에서 `소셜 로그인 vs 로컬 로그인`을 동시에 지원할 때, User 테이블의`username`, `email`, `password` 이외에 필를드 추가해야 되나?
> ❗ 결론 먼저 말하자면: User 테이블을 하나로 두고, `social_provider`, `social_id` 같은 소셜 정보 필드를 추가해서 구분한다.

### ✅ 테이블을 나누지 않고 하나의 테이블로 관리하는 이유
| 이유 | 설명 |
|------|------|
|로그인 방식만 다를 뿐, 사용자 정보는 동일 | (닉네임, 이메일, 역할 등) |
| 회원 기능(리뷰 작성, 글 작성 등)은 로그인 방식과 무관 | 같은 테이블로 관리하는 게 유리
| 소셜 로그인 → 로컬 로그인으로 전환하는 경우도 있음 | 분리하면 전환이 어려움 |
| 로그인 방식만 식별하면 됨 | `social_provider`, `social_id`로 충분 |

### ✅ 필드 예시
| 필드명 | 타입 | 설명|
|--------|------|------|
| `social_provider` | VARCHAR(20) NOT NULL | 로그인 제공자(local, kakao, google 등) |
| `social_id` | VARCHAR(50~100) | 소셜 서비스에서의 고유 ID |

#### `social_id` 길이
| 길이 | 이유 |
|------|------|
| 50 | 대부분의 소셜 로그인 서비스 ID를 커버 가능 |
| 100 | 해외 여러 OAuth 서비스 확장 고려 시 안전 여유 |

### 💡 팁
- UNIQUE 제약 조건 꼭 걸어주기.
  → 같은 `social_provider`에서 동일한 `social_id`가 두 번 들어오면 안 된다.
```sql
UNIQUE(social_provider, social_id)
```
- 이 조합으로 "같은 소셜 서비스의 동일 계정"을 구분한다.

---

## ✅ 마무리 한 줄 정리

> **속성 하나하나는 단순해 보여도, 실제 서비스 흐름과 운영 목적에 따라 필요한 이유가 분명하다!** 🔍
