# 📚 (JAVA 인프런 - 중급 2편) Chapter 6: 컬렉션 프레임워크 - 해시(Hash)
> 📌 공부 날짜: 2025/03/28

---

## ✅ Set(셋)
- **정의**: 셋은 유일한 요소들의 컬렉션이다.
- **특징**
    1. 유일성: 셋에는 중복된 요소가 존재하지 않는다. 셋에 요소를 추가할 때, 이미 존재하는 요소면 무시된다.
    2. 순서 미보장: 대부분의 셋 구현에서는 요소들의 순서를 보장하지 않는다. 즉 요소를 출력할 때 입력 순서와 다를 수 있다.
    3. 빠른 검색: 셋은 요소의 유무를 빠르게 확인할 수 있도록 최적화 되어 있다. 이는 데이터의 중복을 방지하고 빠른 조회를 가능하게 한다.
- **용도**: 중복을 허용하지 않고, 요소의 유무만 중요한 경우에 사용된다.

> 🔍 예시)
> - `List`: 장바구니 목록, 순서가 중요한 일련의 이벤트 목록
> - `Set`: 회원 ID 집합, 고유한 항목의 집합

---

## ✅ 해시 알고리즘
- 해시(Hash) 알고리즘을 사용하면 데이터를 찾는 검색 성능을 평균 `O(1)`로 비약적으로 끌어올릴 수 있다.
- 데이터의 값 자체를 배열의 인덱스로 사용하는 것.
- 그리하여 배열의 인덱스를 활용해서 단 번에 필요한 데이터를 찾을 수 있다.
- 덕분에 `O(n)`의 검색 성능을 `O(1)`로 획기적으로 개선할 수 있다.

> - **단점**: 낭비되는 메모리 공간이 생김
> - **해결 방법**: 공간도 절약하면서, 넓은 범위의 값을 사용할 수 있는 방법이 있는데, 바로 나머지 연산을 사용하는 것이다.
> - 저장할 수 있는 배열의 크기(CAPACITY)는 10이라 가정. 그 크기에 맞추어 나머지 연산을 사용하면 된다.
> - ex) 나머지 연산
>   - 1 % 10 = 1
>   - 5 % 10 = 5
>   - 14 % 10 = 4
>   - 99 % 10 = 9 
> - 일반적인 방법으로는 14와 99를 크기가 10인 배열의 인덱스로 사용할 수 없다. 하지만 나머지 연산을 활용하면 14는 4로, 99는 9로 인덱스로 활용할 수 있다.

### 🔍 해시 인덱스(hash index)
- 위와 같이 배열의 인덱스로 사용할 수 있도록 원래의 값을 계산한 인덱스를 `해시 인덱스`라 한다.
- 14의 해시 인덱스는 4, 99의 해시 인덱스는 9이다.
- 이렇게 나머지 연산을 통해 해시 인덱스를 구할 수 있다.

> 📌 정리
> - 해시 인덱스를 통해 `O(1)`의 성능으로 데이터를 저장하고, `O(1)`의 성능으로 데이터를 조회할 수 있게 되었다.

> 🔍 한계 - 해시 충돌
> - 저장할 위치가 충돌할 수 있다는 한계가 있다.
> - 예를 들어 1, 11의 두 값은 10으로 나누면 둘 다 해시 인덱스가 1이 되는 문제가 발생한다.
> - 정리하면 다른 값을 입력 했지만 같은 해시 코드가 나오게 되는데 이것을 `해시 충돌`이라고 한다.

---

## ✅ 해시 충돌 해결
- 해시 충돌은 낮은 확률로 일어난다고 가정한다.
- 해결 방안은 바로 해시 충돌이 일어났을 때 단순하게 같은 해시 인덱스의 값을 같은 인덱스에 함께 저장해버리는 것이다.
- 물론 여러 데이터를 배열의 하나의 공간에 함께 저장할 수는 없다. 대신에 배열 안에 배열을 만들면 된다.
- 물론 배열 안에 리스트 같은 다른 자료구조를 사용해도 된다. (`LinkedList`를 사용하면 편리)

> 📌 정리
> - 해시 인덱스를 사용하는 방식은 최악의 경우 `O(n)`의 성능을 보인다. 하지만 확률적으로 보면 어느 정도 넓게 퍼지기 때문에 평군으로 보면 대부분 `O(1)`의 성능이다.

### 🔍 해시 인덱스 충돌 확률
- 해시 충돌이 발생할 확률은 입력하는 데이터의 수와 배열의 크기와 관련이 있다. 입력하는 데이터의 수와 비교해서 배열의 크기가 클 수록 확률이 낮아진다.
- 통계적으로 입력한 데이터의 수가 배열의 크기를 75% 넘지 않으면 해시 인덱스는 자주 충돌하지 않는다.
- 배열의 크기를 크게 만들면 해시 충돌은 줄어서 성능은 좋아지지만, 많은 메모리가 낭비된다.
    - 반대로 배열의 크기를 너무 작게 만들면 해시가 자주 충돌해서 성능이 나빠진다.
    - 상황에 따라 다르겠지만 보통 75%를 적절한 크기로 보고 기준으로 잡는 것이 효과적이다.
  
> 📌 정리: 해시 인덱스를 사용하는 경우의 성능
> - **데이터 저장**
>   - 평균: `O(1)`
>   - 최악: `O(n)`
> - **데이터 조회**
>   - 평균: `O(1)`
>   - 최악: `O(n)`

---
